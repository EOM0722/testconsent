<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="description" content="사과나무구강유래물은행" />
    <meta name="author" content="사과나무구강유래물은행" />
    <title>인체유래물 기증 동의서 - AppleTree OralBiobank</title>
    <link rel="icon" type="image/x-icon" href="static/assets/favicon.ico" />
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="static/css/styles.css">
    <style>
        html, body {
            overflow-x: hidden;
            touch-action: manipulation;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior-y: contain;
        }
        .signature-pad {
            position: relative;
            width: 100%;
            height: 200px;
            background-color: #f8f9fa;
            touch-action: none !important;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            overflow: hidden;
        }
        .signature-pad canvas {
            position: absolute;
            left: 0;
            top: 0;
            width: 100% !important;
            height: 100% !important;
            border: 1px solid #ccc;
            touch-action: none !important;
            background: white;
        }
        .clear-button {
            position: absolute;
            bottom: 10px;
            right: 10px;
            z-index: 100;
            background-color: rgba(255, 255, 255, 0.9);
        }
        select {
            -webkit-appearance: auto;
            -moz-appearance: auto;
            appearance: auto;
        }
        @media (max-width: 768px) {
            .signature-pad {
                margin-bottom: 20px;
            }
            .clear-button {
                padding: 4px 8px;
                font-size: 12px;
            }
            canvas {
                touch-action: none !important;
            }
        }
    </style>
</head>
<body class="d-flex flex-column h-100">
    <main class="flex-shrink-0">
        <nav class="navbar navbar-expand-lg navbar-light bg-white py-3">
            <div class="container px-5">
                <a class="navbar-brand" href="/" aria-label="홈으로 이동"><span class="fw-bolder text-primary">Apple Tree Oral Biobank</span></a>
            </div>
        </nav>
        <section class="py-5">
            <div class="container px-5">
                <div class="bg-light rounded-4 py-5 px-4 px-md-5">
                    <div class="text-center mb-5">
                        <h1 class="fw-bolder">인체유래물등의 기증 동의서</h1>
                        <p class="lead fw-normal text-muted mb-0">귀하의 인체유래물등의 기증과 관련하여 인체유래물은행에 보관되며, 귀하의 개인정보는 엄격히 보호됩니다.</p>
                    </div>
                    <div class="row gx-5 justify-content-center">
                        <div class="col-lg-8 col-xl-6">
                            <form id="contactForm">
                                <!-- 기존 폼 필드들은 유지 -->
                                <div class="form-floating mb-3">
                                    <input class="form-control" id="name" type="text" placeholder="성명을 입력하세요..." 
                                           aria-label="성명" required />
                                    <label for="name">성명</label>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">생년월일</label>
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <select class="form-select" id="birthYear" title="출생 연도" required>
                                                <option value="" selected>년(yyyy)</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4">
                                            <select class="form-select" id="birthMonth" title="출생 월" required>
                                                <option value="" selected>월(mm)</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4">
                                            <select class="form-select" id="birthDay" title="출생 일" required>
                                                <option value="" selected>일(dd)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-floating mb-3">
                                    <select class="form-select" id="gender" title="성별" required>
                                        <option value="" selected>성별을 선택하세요</option>
                                        <option value="male">남성</option>
                                        <option value="female">여성</option>
                                    </select>
                                    <label for="gender">성별</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input class="form-control" id="address" type="text" placeholder="주소를 입력하세요..." 
                                           aria-label="주소" required />
                                    <label for="address">주소</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input class="form-control" id="phone" type="tel" placeholder="연락처를 입력하세요..." 
                                           aria-label="연락처" required />
                                    <label for="phone">연락처</label>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">동의서 작성일</label>
                                    <div class="row">
                                        <div class="col-sm-4">
                                            <select class="form-select" id="consentYear" title="동의서 작성 연도" required>
                                                <option value="" selected>년(yyyy)</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4">
                                            <select class="form-select" id="consentMonth" title="동의서 작성 월" required>
                                                <option value="" selected>월(mm)</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-4">
                                            <select class="form-select" id="consentDay" title="동의서 작성 일" required>
                                                <option value="" selected>일(dd)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="form-label fw-bold mb-2">서명</label>
                                    <div class="border rounded p-3 signature-pad">
                                        <canvas id="signatureCanvas" aria-label="서명 패드"></canvas>
                                        <button type="button" class="btn btn-outline-secondary btn-sm clear-button" 
                                                onclick="clearSignature()"
                                                aria-label="서명 다시하기">다시 서명하기</button>
                                    </div>
                                </div>
                                <div class="form-check mb-3">
                                    <input class="form-check-input" type="checkbox" id="consent" required />
                                    <label class="form-check-label" for="consent">
                                        위 내용을 모두 이해하였으며, 인체유래물등의 기증에 동의합니다.
                                    </label>
                                </div>
                                <div class="d-flex gap-3 justify-content-center mb-4">
                                    <button class="btn btn-primary btn-lg" type="button" 
                                            onclick="submitForm()"
                                            aria-label="기증 동의서 제출">기증 동의서 제출</button>
                                    <button class="btn btn-secondary btn-lg" type="button" 
                                            onclick="window.location.href='https://eo-m.com/2025/HSP/HSP_Controller.asp?part=nfc&mehId=GV4541&mtype=1'"
                                            aria-label="문진 페이지로 이동">문진하기</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <!-- 모바일 환경에서 스크롤과 줌 방지 -->
    <script>
        document.addEventListener('touchmove', function(e) {
            if (e.target.closest('.signature-pad')) {
                e.preventDefault();
            }
        }, { passive: false });
        
        document.addEventListener('gesturestart', function(e) {
            if (e.target.closest('.signature-pad')) {
                e.preventDefault();
            }
        });

        // iOS 더블탭 줌 방지
        document.addEventListener('touchend', function(e) {
            if (e.target.closest('.signature-pad')) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
    <script src="static/js/scripts.js"></script>
</body>
</html>
